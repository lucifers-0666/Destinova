<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Booking Confirmed | Destinova - Luxury Travel</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&family=Poppins:wght@300;400;500;600;700;800&family=IBM+Plex+Mono:wght@600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <!-- Lottie Animation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.10.5/lottie.min.js"></script>
    
    <!-- QR Code Generator -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <!-- jsPDF & html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Particles.js -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <link rel="stylesheet" href="../css/booking-confirmation.css?v=2.1">
</head>
<body>

    <!-- Background Effects -->
    <div class="background-effects">
        <div class="gradient-mesh"></div>
    </div>

    <!-- Success Hero with Particles -->
    <section class="success-hero">
        <div id="particles-success" class="particles-success"></div>
        
        <!-- Animated Background Mesh -->
        <div class="hero-bg-effects">
            <div class="mesh-gradient"></div>
            <div class="floating-shapes">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
                <div class="shape shape-3"></div>
            </div>
        </div>
        
        <div class="hero-content">
            <!-- Lottie Checkmark Animation Container -->
            <div class="lottie-checkmark-container">
                <div id="lottie-animation"></div>
            </div>
            
            <h1 class="success-title">Booking Confirmed!</h1>
            <p class="success-message">
                Thank you for choosing Destinova. Your e-ticket has been sent to your email address.
            </p>
            
            <!-- Enhanced Booking Reference Card with 3D Tilt -->
            <div id="booking-ref-container" class="booking-ref-container glass-morphism booking-ref-tilt">
                <div class="booking-ref-inner">
                    <span class="booking-ref-label">Booking Reference</span>
                    <div class="booking-ref-display">
                        <span id="booking-ref" class="booking-ref">DEST1NOVA</span>
                        <button id="copy-ref-btn" class="copy-ref-btn magnetic-btn" title="Copy Reference">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <span id="copy-tooltip" class="copy-tooltip">Copied!</span>
                </div>
            </div>

            <!-- Social Share with Magnetic Effects -->
            <div class="social-share">
                <span class="share-label">Share your journey:</span>
                <div class="share-buttons">
                    <button class="share-btn magnetic-btn" title="Share on Twitter">
                        <i class="fab fa-twitter"></i>
                    </button>
                    <button class="share-btn magnetic-btn" title="Share on Facebook">
                        <i class="fab fa-facebook"></i>
                    </button>
                    <button class="share-btn magnetic-btn" title="Share on WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </button>
                    <button class="share-btn magnetic-btn" title="Share on Instagram">
                        <i class="fab fa-instagram"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="confirmation-main">
        <div class="container">
            
            <!-- Ticket Card -->
            <div class="ticket-container">
                <div class="ticket-card glass-card" id="ticket-card">
                    
                    <!-- Ticket Header -->
                    <div class="ticket-header">
                        <div class="airline-info">
                            <div class="airline-logo-circle">
                                <i class="fas fa-plane"></i>
                            </div>
                            <div>
                                <h2 class="airline-name">Destinova Air</h2>
                                <p class="flight-number">Flight: DN 789</p>
                            </div>
                        </div>
                        <div class="ticket-badge">
                            <i class="fas fa-shield-check"></i>
                            <span>Confirmed</span>
                        </div>
                    </div>

                    <!-- Flight Path - Timeline Design -->
                    <div class="flight-path-container">
                        <div class="flight-path-details glass-morphism flight-details-slide">
                            <div class="flight-segment departure animate-on-scroll">
                                <div class="city-code flip-card">DEL</div>
                                <div class="city-name">New Delhi</div>
                                <div class="airport-name">Indira Gandhi Int'l</div>
                                <div class="flight-time-block">
                                    <div class="flight-time">08:00</div>
                                    <div class="flight-date">15 Mar, 2025</div>
                                </div>
                                <div class="terminal-gate">
                                    <i class="fas fa-map-pin"></i>
                                    <span>Terminal: 3, Gate: 24A</span>
                                </div>
                            </div>

                            <div class="flight-path-timeline">
                                <div class="timeline-start-dot pulse-dot"></div>
                                <div class="timeline-line drawing-line animated-plane-line"></div>
                                <div class="flight-path-animated">
                                    <svg class="animated-plane" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                        <g transform="translate(50,50)">
                                            <!-- Plane Trail -->
                                            <path class="plane-trail" d="M -30 0 Q -10 -3 0 0 Q 10 3 30 0" fill="none" stroke="currentColor" stroke-width="2" opacity="0.3"/>
                                            <!-- Plane Body -->
                                            <circle r="8" fill="currentColor"/>
                                            <!-- Wings -->
                                            <path d="M -8 0 L -25 -5 L -25 5 Z" fill="currentColor"/>
                                            <path d="M 8 0 L 25 -5 L 25 5 Z" fill="currentColor"/>
                                        </g>
                                    </svg>
                                </div>
                                <div class="timeline-end-dot pulse-dot"></div>
                            </div>

                            <div class="flight-duration-info">
                                <div class="duration-badge pulse-badge">
                                    <i class="fas fa-clock"></i>
                                    <span class="duration"><span class="time-counter" data-target="2">0</span>h <span class="time-counter" data-target="10">0</span>m</span>
                                </div>
                                <div class="stops-badge pulse-badge">
                                    <i class="fas fa-route"></i>
                                    <span>Non-stop</span>
                                </div>
                            </div>

                            <div class="flight-segment arrival animate-on-scroll" style="animation-delay: 0.1s">
                                <div class="city-code flip-card">BOM</div>
                                <div class="city-name">Mumbai</div>
                                <div class="airport-name">Chhatrapati Shivaji Int'l</div>
                                <div class="flight-time-block">
                                    <div class="flight-time">10:10</div>
                                    <div class="flight-date">15 Mar, 2025</div>
                                </div>
                                <div class="terminal-gate">
                                    <i class="fas fa-map-pin"></i>
                                    <span>Terminal: 2</span>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Details Grid -->
                        <div class="flight-quick-details quick-details-stagger">
                            <div class="quick-detail-card neumorphic">
                                <i class="fas fa-plane"></i>
                                <span class="label">Flight</span>
                                <span class="value">DN 789</span>
                            </div>
                            <div class="quick-detail-card neumorphic">
                                <i class="fas fa-chair"></i>
                                <span class="label">Seat</span>
                                <span class="value">12A</span>
                            </div>
                            <div class="quick-detail-card neumorphic">
                                <i class="fas fa-door-open"></i>
                                <span class="label">Gate</span>
                                <span class="value">TBA</span>
                            </div>
                            <div class="quick-detail-card neumorphic">
                                <i class="fas fa-building"></i>
                                <span class="label">Terminal</span>
                                <span class="value">3</span>
                            </div>
                        </div>
                    </div>

                    <!-- Passenger Details - Accordion Design -->
                    <div class="passenger-details-section glass-morphism passenger-accordion">
                        <div class="passenger-header" id="passenger-toggle">
                            <h3 class="section-title">
                                <i class="fas fa-users"></i>
                                Passenger Information
                            </h3>
                            <button class="passenger-toggle-btn">
                                <span class="toggle-text">View Details</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        
                        <div class="passenger-content" id="passenger-content">
                            <div class="passenger-grid">
                                <div class="passenger-item passenger-card-hover">
                                    <div class="passenger-avatar">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="passenger-info">
                                        <div class="passenger-name">Diwakar Monga</div>
                                        <div class="passenger-meta">
                                            <span><i class="fas fa-chair"></i> Seat: 12A</span>
                                            <span><i class="fas fa-plane-up"></i> Economy</span>
                                            <span><i class="fas fa-suitcase"></i> 2x23kg</span>
                                        </div>
                                    </div>
                                    <div class="passenger-status shimmer-badge">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Confirmed</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ticket Footer - Enhanced QR and Payment -->
                    <div class="ticket-footer">
                        <!-- QR Code Section with Glassmorphism -->
                        <div class="qr-section glass-morphism qr-interactive">
                            <div class="qr-header">
                                <i class="fas fa-qrcode"></i>
                                <h4>Your Boarding Pass</h4>
                            </div>
                            <div class="qr-container qr-zoom-hover">
                                <div class="qr-corners">
                                    <div class="corner top-left"></div>
                                    <div class="corner top-right"></div>
                                    <div class="corner bottom-left"></div>
                                    <div class="corner bottom-right"></div>
                                </div>
                                <div id="qr-code-container" class="qr-code"></div>
                                <div class="qr-scan-line"></div>
                            </div>
                            <p class="qr-instruction">
                                <i class="fas fa-info-circle"></i>
                                Scan this QR code at the gate for boarding
                            </p>
                        </div>

                        <!-- Payment Summary with Neumorphism -->
                        <div class="booking-details glass-morphism">
                            <div class="payment-header">
                                <h4>Payment Summary</h4>
                                <i class="fas fa-check-circle success-icon"></i>
                            </div>
                            
                            <div class="payment-breakdown staggered-payment-items">
                                <div class="payment-row payment-fade-in">
                                    <span class="payment-label">Base Fare</span>
                                    <span class="payment-amount">₹<span class="amount-counter" data-target="18500">0</span></span>
                                </div>
                                <div class="payment-row payment-fade-in">
                                    <span class="payment-label">Taxes & Fees</span>
                                    <span class="payment-amount">₹<span class="amount-counter" data-target="2600">0</span></span>
                                </div>
                                <div class="payment-row payment-fade-in">
                                    <span class="payment-label">Convenience Charge</span>
                                    <span class="payment-amount">₹<span class="amount-counter" data-target="500">0</span></span>
                                </div>
                                <div class="payment-divider"></div>
                                <div class="payment-row total-row payment-highlight">
                                    <span class="payment-label">Total Paid</span>
                                    <span class="payment-amount total-amount">
                                        ₹<span class="total-counter" data-target="21600">0</span>
                                        <span class="sparkle-icon">✨</span>
                                    </span>
                                </div>
                            </div>

                            <div class="payment-method">
                                <i class="fas fa-credit-card"></i>
                                <span class="card-info">•••• <span class="reveal-digits">3234</span></span>
                                <span class="payment-date">28 Oct, 2025</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons action-buttons-enhance">
                <button class="btn-action btn-primary btn-ripple" id="download-ticket-btn">
                    <i class="fas fa-download"></i>
                    <span>Download Ticket</span>
                </button>
                <button class="btn-action btn-ripple" id="email-ticket-btn">
                    <i class="fas fa-envelope"></i>
                    <span>Email Ticket</span>
                </button>
                <button class="btn-action btn-ripple" id="add-to-calendar-btn">
                    <i class="fas fa-calendar-plus"></i>
                    <span>Add to Calendar</span>
                </button>
                <button class="btn-action btn-ripple" id="print-btn">
                    <i class="fas fa-print"></i>
                    <span>Print</span>
                </button>
            </div>

            <!-- What's Next Section - Timeline Redesign -->
            <div class="next-steps glass-card timeline-container">
                <div class="section-header">
                    <h3 class="section-title">
                        <i class="fas fa-list-check"></i>
                        What's Next?
                    </h3>
                    <p class="section-subtitle">Follow these steps for a smooth travel experience</p>
                </div>
                
                <div class="timeline timeline-animated">
                    <div class="timeline-step timeline-slide-in">
                        <div class="timeline-marker">
                            <div class="timeline-dot pulse"></div>
                            <div class="timeline-connector"></div>
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-badge">24 hours</div>
                            <h4 class="timeline-title">Web Check-in Opens</h4>
                            <p class="timeline-text">Save time at the airport by checking in online.</p>
                            <button class="timeline-cta">
                                <span>Check-in Now</span>
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <div class="timeline-step timeline-slide-in">
                        <div class="timeline-marker">
                            <div class="timeline-dot"></div>
                            <div class="timeline-connector"></div>
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-badge">2 hours</div>
                            <h4 class="timeline-title">Arrive at Airport</h4>
                            <p class="timeline-text">Domestic flights require 2 hours, international 3 hours before departure.</p>
                            <span class="location-info">
                                <i class="fas fa-map-pin"></i>
                                Terminal 3, New Delhi
                            </span>
                        </div>
                    </div>

                    <div class="timeline-step timeline-slide-in">
                        <div class="timeline-marker">
                            <div class="timeline-dot"></div>
                            <div class="timeline-connector"></div>
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-badge">Before Boarding</div>
                            <h4 class="timeline-title">Valid Photo ID Required</h4>
                            <p class="timeline-text">Passport, Aadhar Card, or Driver's License required.</p>
                            <button class="timeline-cta secondary">
                                <span>View Requirements</span>
                                <i class="fas fa-external-link-alt"></i>
                            </button>
                        </div>
                    </div>

                    <div class="timeline-step timeline-slide-in">
                        <div class="timeline-marker">
                            <div class="timeline-dot"></div>
                        </div>
                        <div class="timeline-content">
                            <div class="timeline-badge">Real-time Updates</div>
                            <h4 class="timeline-title">Download Destinova App</h4>
                            <p class="timeline-text">Get real-time flight updates and mobile boarding passes.</p>
                            <div class="app-download-buttons">
                                <button class="download-btn">
                                    <i class="fab fa-apple"></i>
                                    <span>iOS</span>
                                </button>
                                <button class="download-btn">
                                    <i class="fab fa-google-play"></i>
                                    <span>Android</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Travel Tips -->
            <div class="travel-tips glass-card tips-stagger">
                <h3 class="section-title">
                    <i class="fas fa-lightbulb"></i>
                    Travel Tips
                </h3>
                <div class="tips-grid">
                    <div class="tip-card tip-card-animate">
                        <i class="fas fa-bag-shopping tip-icon-float"></i>
                        <h4>Baggage</h4>
                        <p>Pack smart! Check our baggage policy for size and weight limits.</p>
                    </div>
                    <div class="tip-card tip-card-animate">
                        <i class="fas fa-shield-virus tip-icon-float"></i>
                        <h4>Health & Safety</h4>
                        <p>Review current travel restrictions and health requirements.</p>
                    </div>
                    <div class="tip-card tip-card-animate">
                        <i class="fas fa-mobile-screen tip-icon-float"></i>
                        <h4>Stay Connected</h4>
                        <p>Enable flight mode and enjoy in-flight WiFi services.</p>
                    </div>
                    <div class="tip-card tip-card-animate">
                        <i class="fas fa-utensils tip-icon-float"></i>
                        <h4>In-Flight Dining</h4>
                        <p>Pre-order meals for a premium dining experience.</p>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Plan Next Trip Section -->
    <section class="promo-section">
        <div class="container">
            <div class="promo-header">
                <h3>Plan Your Next Trip</h3>
                <p>Explore amazing destinations and exclusive deals</p>
            </div>
            <div class="destination-cards-container destination-cards-parallax">
                <div class="destination-card-promo destination-3d-tilt">
                    <img src="https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=400&h=500&fit=crop" alt="Tokyo">
                    <div class="promo-overlay">
                        <h4>Tokyo</h4>
                        <p>From ₹45,000</p>
                        <div class="price-badge-bounce">
                            <i class="fas fa-rupee-sign"></i>
                        </div>
                    </div>
                </div>
                <div class="destination-card-promo destination-3d-tilt">
                    <img src="https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?w=400&h=500&fit=crop" alt="Rome">
                    <div class="promo-overlay">
                        <h4>Rome</h4>
                        <p>From ₹55,000</p>
                        <div class="price-badge-bounce">
                            <i class="fas fa-rupee-sign"></i>
                        </div>
                    </div>
                </div>
                <div class="destination-card-promo destination-3d-tilt">
                    <img src="https://images.unsplash.com/photo-1564507592333-c60657eea523?w=400&h=500&fit=crop" alt="Dubai">
                    <div class="promo-overlay">
                        <h4>Dubai</h4>
                        <p>From ₹35,000</p>
                        <div class="price-badge-bounce">
                            <i class="fas fa-rupee-sign"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="../js/booking-confirmation.js?v=2.1"></script>
    <script>
        // Force cache clearing on version mismatch
        window.addEventListener('load', function() {
            const currentVersion = '2.1';
            const storedVersion = localStorage.getItem('destNovaVersion');
            if (storedVersion !== currentVersion) {
                localStorage.setItem('destNovaVersion', currentVersion);
                // Clear service worker cache
                if ('caches' in window) {
                    caches.keys().then(names => {
                        names.forEach(name => caches.delete(name));
                    });
                }
                // Clear browser cache
                if (window.location.search === '') {
                    window.location.search = '?nocache=' + Date.now();
                }
            }
        });
    </script>
</body>
</html>
